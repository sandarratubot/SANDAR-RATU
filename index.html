<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SANDAR-RATU - Sistem Administrasi & Dokumen Kesyahbandaran</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <style>
    * {margin:0;padding:0;box-sizing:border-box;}
    body {font-family:'Segoe UI',sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);min-height:100vh;display:flex;justify-content:center;align-items:center;}
    
    /* LOGIN */
    .login-container{background:#fff;padding:40px;border-radius:15px;width:100%;max-width:420px;text-align:center;box-shadow:0 10px 30px rgba(0,0,0,0.15);}
    .logo{width:80px;height:80px;margin:0 auto 15px;}
    .login-title{font-size:22px;font-weight:600;margin-bottom:10px;color:#2c3e50;}
    .subtitle{font-size:14px;color:#7f8c8d;margin-bottom:25px;}
    .form-control{width:100%;padding:12px;margin-bottom:15px;border:1px solid #ddd;border-radius:8px;}
    .btn-login{width:100%;padding:12px;border:none;border-radius:8px;background:#3498db;color:#fff;font-weight:bold;cursor:pointer;}
    .btn-login:hover{background:#2980b9;}
    .footer{font-size:12px;color:#7f8c8d;margin-top:20px;}

    /* DASHBOARD */
    .dashboard{display:none;flex-direction:column;height:100vh;width:100%;}
    .header{background:#2c3e50;color:white;height:60px;display:flex;align-items:center;justify-content:space-between;padding:0 20px;}
    .header .logo-icon{background:#3498db;width:36px;height:36px;border-radius:8px;display:flex;justify-content:center;align-items:center;margin-right:10px;}
    .main-container{display:flex;flex:1;}
    .sidebar{width:240px;background:#3498db;color:white;padding-top:20px;}
    .sidebar div{padding:8px 20px;font-weight:600;opacity:0.8;font-size:13px;}
    .sidebar a{display:flex;align-items:center;padding:12px 20px;color:white;text-decoration:none;transition:0.3s;cursor:pointer;}
    .sidebar a:hover{background:rgba(255,255,255,0.1);}
    .sidebar a.active{background:rgba(0,0,0,0.25);font-weight:bold;}
    .content{flex:1;padding:25px;overflow-y:auto;background:#f5f5f5;}
    .content h2{margin-bottom:20px;color:#2c3e50;}

    /* CARD */
    .card{background:white;padding:20px;border-radius:12px;margin-bottom:20px;box-shadow:0 2px 8px rgba(0,0,0,0.05);}
    .form-row{display:flex;gap:15px;margin-bottom:15px;}
    .form-row .form-control{flex:1;}
    .btn-generate{width:100%;padding:12px;background:#2ecc71;border:none;color:white;border-radius:8px;font-weight:600;}
    .btn-generate:hover{background:#27ae60;}
    .barcode-result{display:none;margin-top:15px;padding:15px;background:#f9f9f9;border-radius:8px;text-align:center;}
    .barcode-result a{display:block;margin-top:10px;color:#3498db;font-weight:600;text-decoration:none;}
  </style>
</head>
<body>
  <!-- LOGIN -->
  <div id="loginPage" class="login-container">
    <div class="logo"><i class="fas fa-anchor fa-3x" style="color:#3498db;"></i></div>
    <h2 class="login-title">SANDAR-RATU</h2>
    <p class="subtitle">üìã Sistem Administrasi & Dokumen<br>Kesyahbandaran PPN Palabuhanratu</p>
    <form id="loginForm">
      <input type="text" id="username" class="form-control" placeholder="Nama Pengguna / Email" required>
      <input type="password" id="password" class="form-control" placeholder="Kata Sandi" required>
      <button type="submit" class="btn-login">Masuk</button>
    </form>
    <div class="footer">Hak Cipta ¬© 2025 Sandar-Ratu</div>
  </div>

  <!-- DASHBOARD -->
  <div id="dashboard" class="dashboard">
    <div class="header">
      <div style="display:flex;align-items:center;">
        <div class="logo-icon"><i class="fas fa-anchor"></i></div>
        <strong>SANDAR-RATU</strong>
      </div>
      <button onclick="logout()" style="background:#e74c3c;color:#fff;border:none;padding:8px 14px;border-radius:6px;cursor:pointer;">Keluar</button>
    </div>
    <div class="main-container">
      <!-- Sidebar -->
      <div class="sidebar">
        <div>üë®‚Äç‚úàÔ∏è Petugas</div>
        <a onclick="showPage('departurePetugas', this)"><i class="fas fa-anchor"></i>&nbsp; Keberangkatan</a>
        <a onclick="showPage('arrivalPetugas', this)"><i class="fas fa-ship"></i>&nbsp; Kedatangan</a>

        <div>üö¢ Nelayan</div>
        <a onclick="showPage('departureNelayan', this)"><i class="fas fa-fish"></i>&nbsp; Keberangkatan</a>
        <a onclick="showPage('arrivalNelayan', this)"><i class="fas fa-water"></i>&nbsp; Kedatangan</a>
      </div>

      <!-- Content -->
      <div class="content">
        
        <!-- PETUGAS: Keberangkatan -->
        <div id="departurePetugas" class="content-page">
          <h2>‚öì Petugas - Keberangkatan</h2>
          <div class="card">
            <form class="formGenerate">
              <input type="text" class="form-control" placeholder="Nama Kapal" required>
              <div class="form-row">
                <input type="date" class="form-control" required>
                <input type="time" class="form-control" required>
              </div>
              <input type="text" class="form-control" placeholder="Kapten Kapal" required>
              <button class="btn-generate" type="submit">Generate QR Code</button>
            </form>
            <div class="barcode-result">
              <h4>QR Code Dokumen</h4>
              <div class="qrcode"></div>
              <a href="#" target="_blank">üîó Unduh Dokumen</a>
            </div>
          </div>
        </div>

        <!-- PETUGAS: Kedatangan -->
        <div id="arrivalPetugas" class="content-page" style="display:none;">
          <h2>‚öì Petugas - Kedatangan</h2>
          <div class="card">
            <form class="formGenerate">
              <input type="text" class="form-control" placeholder="Nama Kapal" required>
              <div class="form-row">
                <input type="date" class="form-control" required>
                <input type="time" class="form-control" required>
              </div>
              <input type="text" class="form-control" placeholder="Kapten Kapal" required>
              <button class="btn-generate" type="submit">Generate QR Code</button>
            </form>
            <div class="barcode-result">
              <h4>QR Code Dokumen</h4>
              <div class="qrcode"></div>
              <a href="#" target="_blank">üîó Unduh Dokumen</a>
            </div>
          </div>
        </div>

        <!-- NELAYAN: Keberangkatan -->
        <div id="departureNelayan" class="content-page" style="display:none;">
          <h2>üö¢ Nelayan - Keberangkatan</h2>
          <div class="card">
            <form class="formGenerate">
              <input type="text" class="form-control" placeholder="Nama Kapal" required>
              <div class="form-row">
                <input type="date" class="form-control" required>
                <input type="time" class="form-control" required>
              </div>
              <input type="text" class="form-control" placeholder="Kapten Kapal" required>
              <button class="btn-generate" type="submit">Generate QR Code</button>
            </form>
            <div class="barcode-result">
              <h4>QR Code Dokumen</h4>
              <div class="qrcode"></div>
              <a href="#" target="_blank">üîó Unduh Dokumen</a>
            </div>
          </div>
        </div>

        <!-- NELAYAN: Kedatangan -->
        <div id="arrivalNelayan" class="content-page" style="display:none;">
          <h2>üö¢ Nelayan - Kedatangan</h2>
          <div class="card">
            <form class="formGenerate">
              <input type="text" class="form-control" placeholder="Nama Kapal" required>
              <div class="form-row">
                <input type="date" class="form-control" required>
                <input type="time" class="form-control" required>
              </div>
              <input type="text" class="form-control" placeholder="Kapten Kapal" required>
              <button class="btn-generate" type="submit">Generate QR Code</button>
            </form>
            <div class="barcode-result">
              <h4>QR Code Dokumen</h4>
              <div class="qrcode"></div>
              <a href="#" target="_blank">üîó Unduh Dokumen</a>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

<script>
  // LOGIN
  document.getElementById("loginForm").addEventListener("submit",function(e){
    e.preventDefault();
    if(document.getElementById("username").value && document.getElementById("password").value){
      document.getElementById("loginPage").style.display="none";
      document.getElementById("dashboard").style.display="flex";
      document.body.style.background="white";
      showPage('departurePetugas', document.querySelector(".sidebar a"));
    } else { alert("Isi username & password!"); }
  });

  function logout(){
    document.getElementById("dashboard").style.display="none";
    document.getElementById("loginPage").style.display="block";
    document.body.style.background="linear-gradient(135deg,#667eea,#764ba2)";
  }

  // SWITCH PAGE
  function showPage(pageId, el){
    document.querySelectorAll(".content-page").forEach(p=>p.style.display="none");
    document.getElementById(pageId).style.display="block";
    document.querySelectorAll(".sidebar a").forEach(a=>a.classList.remove("active"));
    if(el){ el.classList.add("active"); }
  }

  // Generate QR Code (semua form)
  document.querySelectorAll(".formGenerate").forEach((form, idx)=>{
    form.addEventListener("submit",function(e){
      e.preventDefault();
      const date=this.querySelector('input[type="date"]').value;
      const time=this.querySelector('input[type="time"]').value;
      const ship=this.querySelector('input[type="text"]').value;
      const code=`FORM-${idx+1}-${ship}-${date.replace(/-/g,"")}-${time.replace(":","")}`;
      const downloadLink=`https://example.com/download/${code}.pdf`; // URL unduhan

      const result=this.parentElement.querySelector(".barcode-result");
      const qrContainer=result.querySelector(".qrcode");
      const previewLink=result.querySelector("a");

      qrContainer.innerHTML=""; // reset
      new QRCode(qrContainer,{
        text: downloadLink,
        width:180,
        height:180
      });

      previewLink.href=downloadLink;
      previewLink.textContent=`üîó Preview / Unduh (${code})`;

      result.style.display="block";
    });
  });

  // Set default date today
  document.addEventListener("DOMContentLoaded",()=>{
    const today=new Date().toISOString().split("T")[0];
    document.querySelectorAll('input[type="date"]').forEach(i=>i.value=today);
  });
</script>
</body>
</html>
